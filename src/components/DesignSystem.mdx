import { Meta } from '@storybook/addon-docs/blocks'
import { Text } from './ui/primitives/Text'
import { Box } from './ui/primitives/Box'
import { VStack } from './ui/primitives/Stack'

<Meta title="Design System/Overview" />

# Design System

Laststance.io's design system provides consistent typography, spacing, and layout primitives. Built on design tokens, Tailwind CSS, and CVA.

## Quick Start (3 minutes)

### 1. Import Primitives

```tsx
import { Text, Box, Stack, HStack, VStack } from '@/components/ui/primitives'
```

### 2. Use Text for All Typography

```tsx
// Page title → renders as <h1>
<Text variant="h1">Welcome</Text>

// Muted description with spacing
<Text variant="body" color="muted" mt={6}>
  Description text here.
</Text>

// Category label
<Text variant="overline" color="accent">
  Featured
</Text>
```

### 3. Use Box for Layout Containers

```tsx
// Card container
<Box p={6} rounded="xl" bg="elevated" shadow="md">
  <Text variant="h3">Card Title</Text>
</Box>

// Page section with max width
<Box maxW="2xl" mx="auto" mt={16}>
  <Text variant="h2">Section</Text>
</Box>
```

### 4. Use Stack for Flex Layouts

```tsx
// Vertical stack with gap
<VStack gap={4}>
  <Text variant="body">Item 1</Text>
  <Text variant="body">Item 2</Text>
</VStack>

// Horizontal layout
<HStack gap={6} wrap align="center">
  <Text variant="caption">Left</Text>
  <Text variant="caption">Right</Text>
</HStack>
```

---

## Typography Scale

Responsive 3-step: **mobile** (default) → **tablet** (sm: 640px+) → **desktop** (lg: 1024px+)

| Variant | Mobile | Tablet | Desktop | Element |
|---------|--------|--------|---------|---------|
| `display` | 36px | 48px | 60px | `<h1>` |
| `h1` | 30px | 36px | 48px | `<h1>` |
| `h2` | 24px | 30px | 36px | `<h2>` |
| `h3` | 20px | 24px | 28px | `<h3>` |
| `h4` | 18px | 20px | 24px | `<h4>` |
| `bodyLarge` | 18px | 20px | 22px | `<p>` |
| **`body`** | **16px** | **18px** | **20px** | **`<p>`** |
| `bodySmall` | 14px | 16px | 18px | `<p>` |
| `caption` | 14px | 14px | 16px | `<span>` |
| `overline` | 12px | 12px | 14px | `<span>` |
| `code` | 14px | 16px | 18px | `<code>` |

---

## Color Variants

All colors meet **WCAG 2.2 AA** contrast requirements.

| Variant | Light | Dark | Ratio |
|---------|-------|------|-------|
| `default` | zinc-900 | zinc-50 | 21:1 / 18:1 |
| `muted` | zinc-600 | zinc-300 | 5.7:1 / 10:1 |
| `accent` | teal-700 | teal-400 | 6.0:1 / 6.5:1 |

---

## Spacing (8pt Grid)

Text and Box share the same spacing props: `p`, `px`, `py`, `m`, `mx`, `my`, `mt`, `mb`.

| Value | Size | Use Case |
|-------|------|----------|
| 2 | 8px | Tight (icon + text) |
| 4 | 16px | Standard gap |
| 6 | 24px | Card padding, relaxed gap |
| 8 | 32px | Section internal spacing |
| 16 | 64px | Section top margin |

---

## Migration Guide

### From Raw HTML to Primitives

```diff
- <h1 className="text-4xl font-bold tracking-tight text-zinc-800 sm:text-5xl dark:text-zinc-100">
+ <Text variant="h1">

- <p className="mt-6 text-base text-zinc-600 dark:text-zinc-400">
+ <Text variant="body" color="muted" mt={6}>

- <div className="mt-16 sm:mt-20">
+ <Box mt={16}>

- <div className="flex flex-wrap gap-6 items-center">
+ <HStack gap={6} wrap align="center">

- <div className="flex flex-col gap-4">
+ <VStack gap={4}>
```

### Card Internal Composition

Cards use Text internally — don't replace Card sub-components:

```tsx
// Correct: Use Card sub-components as before
<Card>
  <CardEyebrow>March 2026</CardEyebrow>
  <CardTitle href="/post">Post Title</CardTitle>
  <CardDescription>Description</CardDescription>
</Card>
```

---

## Decision Tree

**Which primitive?**

- **Displaying text?** → `<Text variant="..." />`
- **Container with spacing/bg/border?** → `<Box />`
- **Vertical list of items?** → `<VStack gap={N} />`
- **Horizontal row?** → `<HStack gap={N} />`
- **Generic flex?** → `<Stack direction="..." />`

**Which Text variant?**

- **Hero / splash?** → `display`
- **Page title?** → `h1`
- **Section heading?** → `h2`
- **Card / sub-section title?** → `h3` or `h4`
- **Main content?** → `body` (default)
- **Lead paragraph?** → `bodyLarge`
- **Secondary info?** → `bodySmall`
- **Meta / labels?** → `caption`
- **Category tags?** → `overline`
- **Code?** → `code`

---

## Token Architecture

```
src/lib/design-tokens.ts          ← Single source of truth
       │
       ├──→ tailwind.config.ts    (imports tokens → generates fontSize)
       ├──→ Text.tsx / Box.tsx    (CVA maps to Tailwind classes)
       └──→ Storybook stories    (imports and visualizes tokens)

src/components/ui/primitives/
       ├── spacing.ts             ← Shared spacing variants (DRY)
       ├── Text.tsx               ← Typography primitive
       ├── Box.tsx                ← Layout primitive
       ├── Stack.tsx              ← Flex layout primitive
       └── index.ts              ← Barrel exports
```
